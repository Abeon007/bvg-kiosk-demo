<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BVG Ticket Kiosk v2.0</title>
    <style>
        :root {
            --bvg-yellow: #FFCC00;
            --bvg-dark: #333333;
            --bvg-light: #F5F5F5;
            --bvg-gray: #666666;
            --bvg-success: #4CAF50;
            --bvg-error: #F44336;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background: #222;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .kiosk-container {
            width: 900px;
            height: 675px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            position: relative;
            aspect-ratio: 4/3;
        }
        
        .kiosk-header {
            background: var(--bvg-yellow);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--bvg-dark);
        }
        
        .kiosk-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--bvg-dark);
        }
        
        .kiosk-version {
            color: var(--bvg-dark);
            font-size: 14px;
        }
        
        .screen {
            flex: 1;
            padding: 30px;
            display: none;
            flex-direction: column;
        }
        
        .screen.active {
            display: flex;
        }
        
        .screen-title {
            font-size: 28px;
            color: var(--bvg-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--bvg-yellow);
        }
        
        .language-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 40px;
        }
        
        .language-btn {
            padding: 25px;
            background: var(--bvg-light);
            border: 2px solid var(--bvg-gray);
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .language-btn:hover {
            background: var(--bvg-yellow);
            border-color: var(--bvg-dark);
            transform: translateY(-2px);
        }
        
        .zone-selection {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .zone-card {
            padding: 25px;
            border: 3px solid var(--bvg-gray);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .zone-card:hover {
            border-color: var(--bvg-yellow);
            transform: translateY(-3px);
        }
        
        .zone-card.selected {
            border-color: var(--bvg-yellow);
            background: rgba(255, 204, 0, 0.1);
        }
        
        .zone-label {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--bvg-dark);
        }
        
        .zone-desc {
            color: var(--bvg-gray);
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .zone-price {
            font-size: 18px;
            font-weight: bold;
            color: var(--bvg-dark);
        }
        
        .ticket-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .ticket-card {
            padding: 20px;
            border: 2px solid var(--bvg-gray);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .ticket-card:hover {
            border-color: var(--bvg-yellow);
        }
        
        .ticket-card.selected {
            border-color: var(--bvg-yellow);
            background: rgba(255, 204, 0, 0.1);
        }
        
        .ticket-type {
            font-weight: bold;
            font-size: 18px;
            color: var(--bvg-dark);
        }
        
        .ticket-price {
            font-size: 24px;
            font-weight: bold;
            color: var(--bvg-dark);
            margin-top: 10px;
        }
        
        .payment-method {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 40px;
        }
        
        .payment-btn {
            padding: 30px;
            border: 2px solid var(--bvg-gray);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 18px;
        }
        
        .payment-btn:hover {
            border-color: var(--bvg-yellow);
            transform: translateY(-2px);
        }
        
        .summary-box {
            background: var(--bvg-light);
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .summary-total {
            font-size: 28px;
            font-weight: bold;
            color: var(--bvg-dark);
            margin-top: 10px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: auto;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
        }
        
        .btn-primary {
            background: var(--bvg-yellow);
            color: var(--bvg-dark);
            font-weight: bold;
        }
        
        .btn-primary:hover {
            background: #FFD633;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--bvg-light);
            color: var(--bvg-dark);
            border: 2px solid var(--bvg-gray);
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .success-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .success-icon {
            font-size: 80px;
            color: var(--bvg-success);
            margin-bottom: 30px;
        }
        
        .error-screen {
            background: rgba(244, 67, 54, 0.1);
            border: 2px solid var(--bvg-error);
            border-radius: 12px;
            padding: 30px;
            margin-top: 40px;
        }
        
        .error-icon {
            font-size: 50px;
            color: var(--bvg-error);
            margin-bottom: 20px;
        }
        
        .processing {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .spinner {
            width: 80px;
            height: 80px;
            border: 8px solid var(--bvg-light);
            border-top: 8px solid var(--bvg-yellow);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .bicycle-option {
            background: var(--bvg-light);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .current-selection {
            background: var(--bvg-yellow);
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 14px;
            margin-top: 10px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="kiosk-container">
        <div class="kiosk-header">
            <div class="kiosk-title">BVG Ticket System v3.0</div>
            <div class="kiosk-version">Berlin Public Transport</div>
        </div>
        
        <!-- Screen 1: Language Selection -->
        <div class="screen active" id="screen-language">
            <h2 class="screen-title">Select Your Language / W√§hlen Sie Ihre Sprache</h2>
            <div class="language-grid">
                <div class="language-btn" onclick="selectLanguage('DE')">
                    <strong>DE</strong>
                    <span>Deutsch</span>
                </div>
                <div class="language-btn" onclick="selectLanguage('EN')">
                    <strong>GB</strong>
                    <span>English</span>
                </div>
                <div class="language-btn" onclick="selectLanguage('PL')">
                    <strong>PL</strong>
                    <span>Polski</span>
                </div>
                <div class="language-btn" onclick="selectLanguage('ES')">
                    <strong>ES</strong>
                    <span>Espa√±ol</span>
                </div>
                <div class="language-btn" onclick="selectLanguage('FR')">
                    <strong>FR</strong>
                    <span>Fran√ßais</span>
                </div>
                <div class="language-btn" onclick="selectLanguage('TR')">
                    <strong>TR</strong>
                    <span>T√ºrk√ße</span>
                </div>
            </div>
        </div>
        
        <!-- Screen 2: Zone Selection -->
        <div class="screen" id="screen-zone">
            <h2 class="screen-title">Select Travel Zone</h2>
            <p style="color: var(--bvg-gray); margin-bottom: 20px;">Choose the area you will be traveling in:</p>
            <div class="zone-selection">
                <div class="zone-card" onclick="selectZone('AB')">
                    <div class="zone-label">Zone AB</div>
                    <div class="zone-desc">Berlin City Center<br>All inner city transport</div>
                    <div class="zone-price">Single: ‚Ç¨3.80</div>
                </div>
                <div class="zone-card" onclick="selectZone('BC')">
                    <div class="zone-label">Zone BC</div>
                    <div class="zone-desc">Outer Districts<br>From city border to outskirts</div>
                    <div class="zone-price">Single: ‚Ç¨4.40</div>
                </div>
                <div class="zone-card" onclick="selectZone('ABC')">
                    <div class="zone-label">Zone ABC</div>
                    <div class="zone-desc">Full Network<br>Including BER Airport</div>
                    <div class="zone-price">Single: ‚Ç¨4.80</div>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showScreen('screen-language')">‚Üê Back</button>
                <button class="btn btn-primary" onclick="showScreen('screen-ticket')" id="zone-continue-btn" disabled>Continue</button>
            </div>
        </div>
        
        <!-- Screen 3: Ticket Type -->
        <div class="screen" id="screen-ticket">
            <h2 class="screen-title">Select Ticket Type</h2>
            <div class="current-selection">Selected Zone: <span id="current-zone">AB</span></div>
            <div class="ticket-grid">
                <div class="ticket-card" onclick="selectTicket('single')">
                    <div class="ticket-type">Single Ticket</div>
                    <div class="ticket-price" id="price-single">‚Ç¨3.80</div>
                    <div style="color: var(--bvg-gray); font-size: 14px; margin-top: 5px;">One-way journey, 2 hours</div>
                </div>
                <div class="ticket-card" onclick="selectTicket('short')">
                    <div class="ticket-type">Short Trip</div>
                    <div class="ticket-price">‚Ç¨2.60</div>
                    <div style="color: var(--bvg-gray); font-size: 14px; margin-top: 5px;">Up to 3 stations, 20 min</div>
                </div>
                <div class="ticket-card" onclick="selectTicket('day')">
                    <div class="ticket-type">Day Ticket</div>
                    <div class="ticket-price" id="price-day">‚Ç¨9.90</div>
                    <div style="color: var(--bvg-gray); font-size: 14px; margin-top: 5px;">Unlimited travel until 3 AM</div>
                </div>
                <div class="ticket-card" onclick="selectTicket('extension')">
                    <div class="ticket-type">Extension</div>
                    <div class="ticket-price">‚Ç¨2.30</div>
                    <div style="color: var(--bvg-gray); font-size: 14px; margin-top: 5px;">Zone extension for existing ticket</div>
                </div>
            </div>
            
            <div class="bicycle-option">
                <div>
                    <strong>Add Bicycle Ticket?</strong>
                    <div style="color: var(--bvg-gray); font-size: 14px; margin-top: 5px;">Valid for taking one bicycle</div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 14px; color: var(--bvg-gray);">Additional:</div>
                    <div style="font-size: 20px; font-weight: bold;">‚Ç¨2.20</div>
                    <button class="btn btn-secondary" style="padding: 8px 15px; margin-top: 10px;" onclick="toggleBicycle()">Add</button>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showScreen('screen-zone')">‚Üê Back</button>
                <button class="btn btn-primary" onclick="showScreen('screen-summary')" id="ticket-continue-btn" disabled>Continue</button>
            </div>
        </div>
        
        <!-- Screen 4: Price Summary -->
        <div class="screen" id="screen-summary">
            <h2 class="screen-title">Order Summary</h2>
            <div class="summary-box">
                <div class="summary-row">
                    <span>Ticket Type:</span>
                    <span id="summary-ticket-type">Single Ticket</span>
                </div>
                <div class="summary-row">
                    <span>Zone:</span>
                    <span id="summary-zone">AB</span>
                </div>
                <div class="summary-row">
                    <span>Base Price:</span>
                    <span id="summary-base-price">‚Ç¨3.80</span>
                </div>
                <div class="summary-row" id="bicycle-row" style="display: none;">
                    <span>Bicycle Ticket:</span>
                    <span>+ ‚Ç¨2.20</span>
                </div>
                <div class="summary-row" style="border-bottom: none; padding-top: 20px;">
                    <span><strong>Total Amount:</strong></span>
                    <span class="summary-total" id="summary-total">‚Ç¨3.80</span>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showScreen('screen-ticket')">‚Üê Back</button>
                <button class="btn btn-primary" onclick="showScreen('screen-payment')">Continue to Payment</button>
            </div>
        </div>
        
        <!-- Screen 5: Payment Method -->
        <div class="screen" id="screen-payment">
            <h2 class="screen-title">Select Payment Method</h2>
            <div class="current-selection">Total: <span id="payment-total">‚Ç¨3.80</span></div>
            <div class="payment-method">
                <div class="payment-btn" onclick="selectPayment('card')">
                    üí≥<br><br>
                    <strong>Card Payment</strong><br>
                    <span style="font-size: 14px; color: var(--bvg-gray);">Visa, Mastercard, EC</span>
                </div>
                <div class="payment-btn" onclick="selectPayment('cash')">
                    üí∂<br><br>
                    <strong>Cash</strong><br>
                    <span style="font-size: 14px; color: var(--bvg-gray);">Coins & Notes</span>
                </div>
            </div>
            
            <!-- Error Handling Example -->
            <div class="error-screen" style="display: none;" id="payment-error">
                <div class="error-icon">‚ö†Ô∏è</div>
                <h3>Payment Declined</h3>
                <p>Your card was not accepted. Please try another card or use cash.</p>
                <button class="btn btn-primary" style="margin-top: 15px;" onclick="retryPayment()">Try Again</button>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="showScreen('screen-summary')">‚Üê Back</button>
                <button class="btn btn-primary" onclick="processPayment()" id="pay-button">Pay Now</button>
            </div>
        </div>
        
        <!-- Screen 6: Processing -->
        <div class="screen" id="screen-processing">
            <div class="processing">
                <div class="spinner"></div>
                <h2 class="screen-title">Processing Payment</h2>
                <p style="color: var(--bvg-gray); text-align: center; margin-top: 20px;">
                    Please wait while we process your payment...<br>
                    Do not remove your card.
                </p>
            </div>
        </div>
        
        <!-- Screen 7: Success -->
        <div class="screen" id="screen-success">
            <div class="success-screen">
                <div class="success-icon">‚úÖ</div>
                <h2 class="screen-title">Payment Successful!</h2>
                <p style="font-size: 18px; color: var(--bvg-gray); margin: 20px 0;">
                    Your ticket has been issued and printed.<br>
                    Please collect it from the slot below.
                </p>
                <div style="background: var(--bvg-light); padding: 20px; border-radius: 10px; margin-top: 20px; text-align: left; width: 80%;">
                    <strong>Ticket Details:</strong><br>
                    <span id="success-ticket-type">Single Ticket - Zone AB</span><br>
                    <span id="success-ticket-price">‚Ç¨3.80</span><br>
                    <span style="font-size: 12px; color: var(--bvg-gray);">Valid until: Today, 23:59</span>
                </div>
                <button class="btn btn-primary" style="margin-top: 40px; width: 200px;" onclick="resetKiosk()">Buy Another Ticket</button>
                <p style="color: var(--bvg-gray); margin-top: 20px; font-size: 14px;">
                    Returning to start screen in <span id="countdown">10</span> seconds...
                </p>
            </div>
        </div>
    </div>

    <script>
        // State management
        let currentState = {
            language: 'EN',
            zone: null,
            ticket: null,
            hasBicycle: false,
            paymentMethod: null
        };
        
        // Zone prices
        const zonePrices = {
            'AB': { single: 3.80, day: 9.90 },
            'BC': { single: 4.40, day: 10.40 },
            'ABC': { single: 4.80, day: 11.20 }
        };
        
        // Ticket prices (base for AB zone)
        const ticketPrices = {
            'single': 0, // Will be calculated based on zone
            'short': 2.60,
            'day': 0, // Will be calculated based on zone
            'extension': 2.30
        };
        
        // DOM Elements
        const zoneCards = document.querySelectorAll('.zone-card');
        const ticketCards = document.querySelectorAll('.ticket-card');
        
        // Screen Navigation
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // Show target screen
            document.getElementById(screenId).classList.add('active');
            
            // Update summary if going to summary screen
            if (screenId === 'screen-summary') {
                updateSummary();
            }
        }
        
        // Language Selection
        function selectLanguage(lang) {
            currentState.language = lang;
            showScreen('screen-zone');
        }
        
        // Zone Selection
        function selectZone(zone) {
            currentState.zone = zone;
            
            // Update visual selection
            zoneCards.forEach(card => {
                card.classList.remove('selected');
                if (card.querySelector('.zone-label').textContent.includes(zone)) {
                    card.classList.add('selected');
                }
            });
            
            // Update zone display
            document.getElementById('current-zone').textContent = zone;
            
            // Update prices based on zone
            document.getElementById('price-single').textContent = `‚Ç¨${zonePrices[zone].single.toFixed(2)}`;
            document.getElementById('price-day').textContent = `‚Ç¨${zonePrices[zone].day.toFixed(2)}`;
            
            // Enable continue button
            document.getElementById('zone-continue-btn').disabled = false;
        }
        
        // Ticket Selection
        function selectTicket(ticketType) {
            currentState.ticket = ticketType;
            
            // Update visual selection
            ticketCards.forEach(card => {
                card.classList.remove('selected');
                if (card.querySelector('.ticket-type').textContent.toLowerCase().includes(ticketType)) {
                    card.classList.add('selected');
                }
            });
            
            // Enable continue button
            document.getElementById('ticket-continue-btn').disabled = false;
        }
        
        // Toggle Bicycle Ticket
        function toggleBicycle() {
            currentState.hasBicycle = !currentState.hasBicycle;
            const btn = document.querySelector('.bicycle-option button');
            if (currentState.hasBicycle) {
                btn.textContent = 'Remove';
                btn.style.background = '#FFCC00';
            } else {
                btn.textContent = 'Add';
                btn.style.background = '';
            }
            updateSummary();
        }
        
        // Update Order Summary
        function updateSummary() {
            if (!currentState.zone || !currentState.ticket) return;
            
            // Calculate base price
            let basePrice = 0;
            if (currentState.ticket === 'single') {
                basePrice = zonePrices[currentState.zone].single;
            } else if (currentState.ticket === 'day') {
                basePrice = zonePrices[currentState.zone].day;
            } else {
                basePrice = ticketPrices[currentState.ticket];
            }
            
            // Calculate total
            let total = basePrice;
            if (currentState.hasBicycle) {
                total += 2.20;
            }
            
            // Update summary display
            document.getElementById('summary-ticket-type').textContent = 
                currentState.ticket.charAt(0).toUpperCase() + currentState.ticket.slice(1) + ' Ticket';
            document.getElementById('summary-zone').textContent = currentState.zone;
            document.getElementById('summary-base-price').textContent = `‚Ç¨${basePrice.toFixed(2)}`;
            
            // Show/hide bicycle row
            const bicycleRow = document.getElementById('bicycle-row');
            if (currentState.hasBicycle) {
                bicycleRow.style.display = 'flex';
            } else {
                bicycleRow.style.display = 'none';
            }
            
            document.getElementById('summary-total').textContent = `‚Ç¨${total.toFixed(2)}`;
            document.getElementById('payment-total').textContent = `‚Ç¨${total.toFixed(2)}`;
        }
        
        // Payment Selection
        function selectPayment(method) {
            currentState.paymentMethod = method;
            document.querySelectorAll('.payment-btn').forEach(btn => {
                btn.style.borderColor = '';
            });
            event.currentTarget.style.borderColor = '#FFCC00';
        }
        
        // Process Payment
        function processPayment() {
            if (!currentState.paymentMethod) {
                alert('Please select a payment method');
                return;
            }
            
            // Show processing screen
            showScreen('screen-processing');
            
            // Simulate payment processing
            setTimeout(() => {
                // 20% chance of error for demo purposes
                if (Math.random() < 0.2) {
                    showScreen('screen-payment');
                    document.getElementById('payment-error').style.display = 'block';
                    return;
                }
                
                // Update success screen with ticket details
                const basePrice = currentState.ticket === 'single' ? 
                    zonePrices[currentState.zone].single : 
                    currentState.ticket === 'day' ? 
                    zonePrices[currentState.zone].day : 
                    ticketPrices[currentState.ticket];
                
                const total = currentState.hasBicycle ? basePrice + 2.20 : basePrice;
                
                document.getElementById('success-ticket-type').textContent = 
                    `${currentState.ticket.charAt(0).toUpperCase() + currentState.ticket.slice(1)} Ticket - Zone ${currentState.zone}`;
                document.getElementById('success-ticket-price').textContent = `‚Ç¨${total.toFixed(2)}`;
                
                showScreen('screen-success');
                startCountdown();
            }, 2000);
        }
        
        // Retry Payment
        function retryPayment() {
            document.getElementById('payment-error').style.display = 'none';
            // For demo, automatically succeed on retry
            showScreen('screen-processing');
            setTimeout(() => {
                showScreen('screen-success');
                startCountdown();
            }, 1500);
        }
        
        // Auto-return countdown
        function startCountdown() {
            let count = 10;
            const countdownElement = document.getElementById('countdown');
            const countdownInterval = setInterval(() => {
                count--;
                countdownElement.textContent = count;
                if (count <= 0) {
                    clearInterval(countdownInterval);
                    resetKiosk();
                }
            }, 1000);
        }
        
        // Reset Kiosk
        function resetKiosk() {
            // Reset state
            currentState = {
                language: 'EN',
                zone: null,
                ticket: null,
                hasBicycle: false,
                paymentMethod: null
            };
            
            // Reset UI
            zoneCards.forEach(card => card.classList.remove('selected'));
            ticketCards.forEach(card => card.classList.remove('selected'));
            document.getElementById('zone-continue-btn').disabled = true;
            document.getElementById('ticket-continue-btn').disabled = true;
            document.querySelectorAll('.payment-btn').forEach(btn => {
                btn.style.borderColor = '';
            });
            
            // Hide error
            document.getElementById('payment-error').style.display = 'none';
            
            // Reset bicycle button
            const bicycleBtn = document.querySelector('.bicycle-option button');
            bicycleBtn.textContent = 'Add';
            bicycleBtn.style.background = '';
            
            // Go to language screen
            showScreen('screen-language');
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial screen
            showScreen('screen-language');
        });
    </script>
</body>
</html>